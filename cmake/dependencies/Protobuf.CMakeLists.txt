cmake_minimum_required(VERSION 3.5)

project(protobuf NONE)

include(ExternalProject)
ExternalProject_Add(protobuf_project
  TMP_DIR "${CMAKE_BINARY_DIR}/${PROJECT_NAME}/tmp"
  STAMP_DIR "${CMAKE_BINARY_DIR}/${PROJECT_NAME}/stamp"
  DOWNLOAD_DIR "${CMAKE_BINARY_DIR}/${PROJECT_NAME}/download"
  SOURCE_DIR "${CMAKE_BINARY_DIR}/${PROJECT_NAME}/source"
  BINARY_DIR "${CMAKE_BINARY_DIR}/${PROJECT_NAME}/build"

  GIT_REPOSITORY https://github.com/google/${PROJECT_NAME}
  GIT_TAG "master"
  LOG_DOWNLOAD TRUE

  # UPDATE_COMMAND ""
  LOG_UPDATE TRUE

  # PATCH_COMMAND git apply "${CMAKE_SOURCE_DIR}/patches/${PROJECT_NAME}.patch"
  LOG_PATCH TRUE

  # CONFIGURE_COMMAND ""
  CMAKE_ARGS
    -DCMAKE_INSTALL_PREFIX=${CMAKE_BINARY_DIR}/dependencies/install
    -DCMAKE_BUILD_TYPE=${CMAKE_BUILD_TYPE}
    -DBUILD_TESTING=OFF
  LOG_CONFIGURE TRUE

  # BUILD_COMMAND ""
  LOG_BUILD TRUE

  # INSTALL_COMMAND ""
  LOG_INSTALL TRUE

  TEST_COMMAND ""
  LOG_TEST TRUE
)
